# vim:fileencoding=utf-8

assert.equal(typeof symbolfor, 'function')
if (typeof Symbol == 'function') assert.equal(typeof symbolfor('a'), 'symbol')
assert.equal(symbolfor('a'), symbolfor('a'))

class CustomIterable:

    def __init__(self, items):
        self.items = items

    def __iter__(self):
        return iter(self.items)

t = []
q = [1,2,3]
for x in CustomIterable(q):
    t.push(x)
assert.deepEqual(q, t)


if type(Map) == 'function':
    m = Map()
    m.set('a', 1)
    assert.equal(len(m), 1)
    s = Set()
    s.add(1)
    s.add(2)
    assert.equal(len(s), 2)

    t = []
    for i in s:
        t.push(i)
    assert.deepEqual(t, [1, 2])

    t = []
    for i in m:
        t.push(i)
    assert.deepEqual(t, ['a'])
    t = []
    for c, i in enumerate(m):
        t.push([c, i])
    assert.deepEqual(t, [[0, 'a']])
    m.set('b', 2)
    t = []
    for i in reversed(m):
        t.push(i)
    assert.deepEqual(t, ['b', 'a'])

    # Test that the iterator created by iter() is itself iterable
    assert.deepEqual(s, Set(iter(s)))
